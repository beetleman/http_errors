# -*- coding: utf-8 -*-
from __future__ import unicode_literals

import os
import pytest

from http_errors.image import Image

@pytest.fixture
def image(testfiles_path):
    return Image(os.path.join(testfiles_path, 'img.jpg'))


def test_get_mime(image):
    assert image.get_mime() == 'image/jpeg'


def test_get_base64(image):
    excepted_base64 = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD//gATQ3JlYXRlZCB3aXRoIEdJTVD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCAAyADIDAREAAhEBAxEB/8QAGwABAAIDAQEAAAAAAAAAAAAAAAMHAgQFAQj/xAAbAQEAAgMBAQAAAAAAAAAAAAAAAgQDBQYIAf/aAAwDAQACEAMQAAAB+VAAAACWFj35KHJVAEsLFr8d6RlhYqvsPOeln1QE2O1bfGel845ar7Dznz7OlAG7g2uccvPs6UAAAAAAAD//xAAeEAEAAwABBQEAAAAAAAAAAAADAQIEIAAQExQwQP/aAAgBAQABBQL4mV1lBQeJHKpnz0ykh1amzP6unuKeFjSrUmYrG9407OGfY2Xp9+jTX8P/xAAsEQABBAADBgQHAAAAAAAAAAABAgMEEQAFIRIgMWGBkRMUFVEwQEFxobHw/9oACAEDAQE/Afgsx3pKthhBUeQvD8SRFrx2ym/cEfvdjsqkvIYRxUQO+IMFjLmBHjigPzzPP+4YkR2pTSmXk2k4zWF6dNci3eydPsdR1rjuRH/KyG36vZIPY3iPIalNJeZVaTha0tpK1mgMZ1MRPzB2Q3wJ06Cr61e7CzWbl1+VcKb+nEdjpfPEzOswno8OQ6SPbQd6q+vyX//EACMRAAICAQMDBQAAAAAAAAAAAAECAAMSBBEgITEyEzBAQVH/2gAIAQIBAT8B9lnVOrHaK6P4nfi7YKWP1LbWubJorFDkveUWetWH4OuaFf2MpQ4t3gG/QTTVmqpUPGyiu7zEr01VR3Rfhf/EACUQAAIBAwMCBwAAAAAAAAAAAAECEQADEiAxQSFRIzAyQFJhsf/aAAgBAQAGPwLyYRS57KJoZoyT8hGlUG7GKFu2IH7RRxkp4q5a3g9NCPE4sDFB0OSnmiSYA5q5cX0k9NPhXCv1xWNy4Svbb2X/xAAhEAEBAAEDAwUAAAAAAAAAAAABEQAhMWEgQaEwQFFxkf/aAAgBAQABPyH0UZ4WhTOEerXSj4BK7Vcngd3uvlw7I4rNZI1nDqeOjmNlLG4dkdBhlgVToGdqQcgJfHTWgu+78OcIKAH7m/sv/9oADAMBAAIAAwAAABCSSSSLySIsSTtmSQGSSSSSSSSf/8QAIREBAQEAAgEDBQAAAAAAAAAAAREhAEExIFHBMEBhcZH/2gAIAQMBAT8Q+i4AioymFgLKhfyc7JabElkFlLPFPS4ACV8VAWCyuwf1zvUp7Xadr+BAAAAmPEe/kR0SIgiIPIlDRawKYeQwS2Z6PYU2ywixlksZ7cBMeid/IjiMREQROAAAqrADVVwA1XgrZDy0A6BIwSlnV9MgJVxRmwfAGLMs4S9mQDo4IhBNR8Tfsv/EACQRAAIBAwMDBQAAAAAAAAAAAAERACExgSBhkTBAUUFxobHw/9oACAECAQE/EOiISDcqPVp4IP1pDYQE8QlOyfjYbfrwfIglF0xX3FDh20V7SEchQ/AghDAGTLjIFclrDWlUsr1seRVbRGgPmpOG1jsv/8QAHxABAQACAgIDAQAAAAAAAAAAAREhMQBBIJEwQMHR/9oACAEBAAE/EPhoBpAKCwNZPfO6Y6wllCynvxQwaqAAWdZ5vMlM9xO1/gQA51vwKn4mxMiCchm7DVIowzRcbvh6XBAi5lm+db8Cp+JpHIiPHQMNACqroOCtBJnAHIEpUTFnjB0vSyysEuDMvCY5vOIcAEIJbOvpf//Z'
    assert excepted_base64 == image.get_base64()
